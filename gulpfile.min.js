var gulp=require("gulp");var cssmin=require("gulp-cssmin");var rename=require("gulp-rename");var concat=require("gulp-concat");var jsmin=require("gulp-jsmin");var plumber=require("gulp-plumber");var sass=require("gulp-sass");var cmq=require("gulp-merge-media-queries");var autoprefixer=require("gulp-autoprefixer");var cleanCss=require("gulp-clean-css");var runSequence=require("run-sequence");gulp.task("sass",function(){gulp.src(["design_skin/origin/_scss/**/*.scss"]).pipe(plumber({handleError:function(err){console.log(err);this.emit("end")}})).pipe(plumber()).pipe(sass()).pipe(cmq({log:true})).pipe(autoprefixer()).pipe(cleanCss()).pipe(gulp.dest("./design_skin/origin/css"))});gulp.task("copy",function(){gulp.src("./library/bootstrap/css/bootstrap.min.css").pipe(rename({prefix:"_",extname:".scss"})).pipe(gulp.dest("./design_skin/origin/_scss/"));gulp.src("./library/bootstrap/fonts/**").pipe(gulp.dest("./design_skin/origin/fonts/"))});gulp.task("js_build",function(){return gulp.src(["./library/bootstrap/js/bootstrap.min.js","./js/_master.js","./js/_header_fixed.js","./js/vk-prlx.min.js"]).pipe(concat("lightning.js")).pipe(gulp.dest("./js/")).pipe(jsmin()).pipe(rename({suffix:".min"})).pipe(gulp.dest("./js/"))});gulp.task("watch",function(){gulp.watch("js/_master.js",["js_build"]);gulp.watch("js/_header_fixed.js",["js_build"]);gulp.watch("js/vk-prlx.min.js",["js_build"]);gulp.watch("design_skin/origin/_scss/**/*.scss",["sass"])});gulp.task("default",["copy","js_build","watch"]);gulp.task("compile",["copy","js_build"]);gulp.task("copy_dist",function(){return gulp.src(["./**/*.php","./**/*.txt","./**/*.css","./**/*.png","./design_skin/**","./images/**","./inc/**","./js/**","./languages/**","./library/**","./template-parts/**","!./tests/**","!./dist/**","!./node_modules/**/*.*"],{base:"./"}).pipe(gulp.dest("dist/lightning"))});gulp.task("dist",function(cb){return runSequence("copy_dist",cb)});